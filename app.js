var express  = require('express');
var app      = express();
var path     = require('path');
var port     = process.env.PORT || 8080;
var portName = '/dev/cu.usbmodem1421';
var mongoose = require('mongoose');
var SerialPort = require("serialport");
var cookieParser = require('cookie-parser');
var bodyParser   = require('body-parser');
var baseColors = require('./rgb').allColorsBase255();
console.log(baseColors)
var scLogoData = "0000000111111111110000000000000000000012222222222210000000000000000001222222222222210000000000000000122222222222222210000000000000001222222222222222100000000000000012222111111122221000000000000000122221000001111110000000000000001222210000000000000000000000000012222111111111000000000000000000122222222222221000000000000000000122222222222221000000000000000000122222222222221000000000000000000111111111222210000000000000000000000000012222100000000000000011111000111122221111100000000000122210012221222212222100000000001222111222212222122222100000000012222212222122221222222100000000122222122221222211122221000000001222221222212221001222210000000012222212222122100012222100000000012222122221210000122221000000000011111222211000001111110000000000000012222100000000000000000000000000122221000000111111000000000000001222210000001222210000000000000012222100000012222100000000000000122221111111122221000000000000001222222222222222210000000000000001222222222222221000000000000000001222222222222100000000000000000001111111111110000000"

// connect db
var configDB = require('./config/database.js');
mongoose.connect(configDB.url);

app.use(cookieParser()); // read cookies (needed for auth)
app.use(bodyParser()); // get information from html forms

app.use(express.static(__dirname + '/public'));
app.use('/bower_components',  express.static(__dirname + '/bower_components'));

// Set up express
app.set('view engine', 'ejs');
app.set('views', path.join(__dirname, 'views'));

require('./app/routes.js')(app, baseColors);





app.listen(port);
console.log('server is running on port: ' + port);
